<!doctype html>
<html>
<head>
<meta charset="utf-8">
<title>无标题文档</title>
</head>

<body>
<script	type="text/javascript">
/* 第一个示例 */
var myObject=(function(){
	var value=0;
    
    return {
		//增加
    	increment: function(inc){
        	value+=inc;
        },
        //获取内部value值
        getValue: function(){
        	return value;
        }        
    };
}());

document.writeln('1 ---- '+myObject.getValue()+'<br/>');
myObject.increment(2);
document.writeln('2 ---- '+myObject.getValue()+'<br/>');

var sayHello=function(who){
	document.writeln('hello '+who);
}
sayHello('fangjuan');

var Quo=function(status){
	return {
		get_status:function(){
			return status;
		}
	};
}
var quo=new Quo('ok');
document.writeln(quo.get_status());

document.writeln('<br/>');
/* 第二个示例 */
function count(){
	var arr=[];
	for(var i=1;i<=3;i++){
		arr.push(function(){
			return i * i;	
		});
	}	
	return arr;
}
var fn = count();
document.writeln(fn[0]());
document.writeln(fn[1]());
document.writeln(fn[2]());

/* 第三个示例 */
function count(){
	var arr=[];
	for(var i=1;i<=3;i++){
		arr.push((function(n){
			return function(){
				return n * n;
			}
		})(i));
	}	
	return arr;
}
var fn_count = count();
document.writeln(fn_count[0]());
document.writeln(fn_count[1]());
document.writeln(fn_count[2]());
document.writeln('<br/>');


var result = (function(x){	// 创建一个匿名函数进行立即执行
	return x * x;
})(3)
document.writeln(result);
document.writeln('<br/>');

var x=0;
function create_counter(initial){
	x = initial||0;
	return {
		inc: function(){
			x += 1;
			return x;
		}
	}
}

var cc = create_counter();
document.writeln(cc.inc());
x=10;	// 修改x值
document.writeln(cc.inc());

function create_counter2(initSeed){
	return {
		getCurrentValue: function(){
			return initSeed;
		},
		inc: function(){
			initSeed+=1;	
			return initSeed;
		}
	}
}

var cc2= new create_counter2();
document.writeln( '获取当前值:'+create_counter2(1).getCurrentValue() );
document.writeln( 'inc:'+create_counter2(1).inc() );

</script>
</body>
</html>
